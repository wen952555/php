:root {
    --table-bg: #004d00;
    --felt-bg: #006400;
    --card-aspect-ratio: 1.4;
    --card-gap: 4px;
    --card-hand-min-width: 30px;
    --card-hand-max-width: 45px;
    --card-final-row-width: 38px;
    --card-bg: #fff;
    --card-shadow: #0003;
    --font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
    --text-light: #fff;
}
html, body {
    width:100%; height:100%; overflow:hidden;
    font-family:var(--font-family);
    background-color:var(--table-bg); color:var(--text-light);
    -webkit-tap-highlight-color:transparent;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
}
body {
    display:flex; justify-content:center; align-items:center; padding:5px;
}
.poker-table {
    background-color:var(--felt-bg);
    border-radius:15px;
    box-shadow:0 0 20px #0006 inset, 0 0 8px #0003;
    width:100%; max-width:450px; height:100%; max-height:800px;
    display:flex; flex-direction:column; padding:10px; overflow:hidden;
}
.table-row {
    display:flex; flex-direction:column; align-items:center; justify-content:center;
    width:100%; padding:0; border-bottom:1px solid #0002; flex:1 1 0px; position:relative;
}
.table-row:last-child { border-bottom:none; }
#row-front, #row-back { flex-grow:1.5; min-height:70px; }
#row-middle-visual {
    flex-grow:3; display:flex; flex-direction:column; justify-content:space-around;
    border-top:1px solid #0002; min-height:180px; padding: 5px 0;
}
#row-buttons { flex-grow:1; justify-content:center; align-items:center; padding-top:5px; padding-bottom:0; min-height:55px; }
.zone-label {
    position:absolute; left:50%; top:50%; transform:translate(-50%, -50%);
    color:var(--label-text-color, #fff4); font-weight:bold; pointer-events:none;
    user-select:none; text-shadow:var(--label-text-shadow,0 1px 3px #0006);
    z-index:0; letter-spacing:.05em; display:flex; flex-direction:column;
    align-items:center; width:auto; line-height:1.2; text-align:center;
}
#row-front .zone-label, #row-back .zone-label { font-size:1.6em; }
#row-middle-visual .zone-label { font-size:1.8em; }
.zone-label .card-count { font-size:.55em; margin-top:3px; opacity:.75; font-weight:400; line-height:1; color:var(--text-light); }

.arranged-hand {
    position: relative;
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    justify-content: center;
    align-items: center;
    gap: var(--card-gap);
    border-radius: 6px;
    width: 100%;
    height: 100%;
    padding: 8px;
    background: none;
    border: 2px dashed rgba(255,255,255,0.15);
    overflow-y: auto;
    box-sizing: border-box;
}
.arranged-hand.as-hand-area {
    flex-direction: column;
    justify-content: space-around;
    align-items: center;
    gap: 5px;
    padding: 5px;
    border-color: rgba(255,255,255,0.25);
}
.hand-area-sub-row {
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    gap: var(--card-gap);
    width: 100%;
}
.arranged-hand.drag-over { background:rgba(255,255,255,0.07);}
.arranged-hand.selected-target-hand { background:rgba(255,255,255,0.11);}
.card-container {
    position: relative; z-index: 1;
    border-radius: 3px; background-color: var(--card-bg);
    box-shadow: 0px 1px 2px var(--card-shadow);
    transition: transform 0.1s ease-out; cursor: grab; touch-action: none;
    display: flex; justify-content: center; align-items: center; flex-shrink: 0;
    height: auto;
    aspect-ratio: calc(1 / var(--card-aspect-ratio));
}
.arranged-hand.as-hand-area .hand-area-sub-row .card-container {
    width: clamp(var(--card-hand-min-width), calc(100% / 5 - var(--card-gap) - 2px), var(--card-hand-max-width));
}
.arranged-hand:not(.as-hand-area) .card-container {
    width: var(--card-final-row-width);
}
.card-container:active { transform: scale(1.06); box-shadow:0 0 8px #f80b;}
.card-container.dragging { opacity:0.65; z-index:99; }
.card-image { width:96%; display:block; }
#row-buttons .arranged-hand { display: none; }
.action-buttons-container .action-buttons { display:flex; gap:16px; }
.game-button {
    padding:6px 16px; font-size:1.1em; background:#1a9626; border:none; border-radius:8px;
    color:#fff; font-weight:600; box-shadow:0 1px 2px rgba(0,0,0,0.08); cursor:pointer;
    transition:background .18s;
}
.game-button[disabled] { opacity:0.5; cursor:not-allowed; }
.game-button.primary-button { background:#ecb007; color:#333; }
.game-button.primary-button:active { background:#ffb700; }
.game-message-bar {
    margin-top:8px; min-height:24px; font-size:1.08em; color:#ffda00; text-align:center; font-weight:bold;
}
.drop-placeholder {
    width: 38px; height: 60px; border: 2.5px dashed #fff6; border-radius: 4px; margin: 2px;
    background: rgba(255,255,255,0.10);
}

@media (max-height: 750px) {
    #row-front, #row-back { flex-grow: 1.3; min-height: 65px; }
    #row-middle-visual { flex-grow: 3.4; min-height: 150px; }
    #row-buttons { flex-grow: 1; min-height: 50px; }
    :root { --card-hand-min-width: 28px; --card-hand-max-width: 42px; --card-final-row-width: 34px; }
}
@media (max-width: 390px) {
    :root { --card-hand-min-width: 26px; --card-hand-max-width: 38px; --card-final-row-width: 30px; --card-gap: 3px; }
    #row-front .zone-label, #row-back .zone-label { font-size:1.4em; }
    #row-middle-visual .zone-label { font-size:1.5em; }
}
